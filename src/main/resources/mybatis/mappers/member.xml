<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"../mybatis-3-mapper.dtd">

	<mapper namespace="mapper.member">
		<resultMap id="buyResult" type="buyerVO">
			<result property="byr_id" column="byr_id" />
		    <result property="password" column="password" />
		    <result property="name" column="name" />
		    <result property="birth_6" column="birth_6" />
		    <result property="sex" column="sex" />
		    <result property="email" column="email" />
		    <result property="phone_num" column="phone_num" />
		</resultMap>
		
		
	<select id="login" resultType="buyerVO"  parameterType="java.util.Map"  >
	    <![CDATA[
			select * from foodmate_buyer 
			 where byr_id=#{byr_id}
			 and pw=#{password}
		]]>
	</select>
		
	<insert id="insertNewBuyer" parameterType="buyerVO">
		<![CDATA[
			insert into foodmate_buyer(
					byr_id, 
			        pw, 
			        name, 
			        birth_6, 
			        sex, 
			        email,
			        phone_num, 
			        join_date, 
			        status
		        )values(
			        #{byr_id}, 
			        #{password}, 
			        #{name}, 
			        #{birth_6}, 
			        #{sex}, 
			        #{email}, 
			        #{phone_num}, 
			        DEFAULT,   -- join_date는 기본값 SYSDATE로 설정
			        'ACTIVE'  -- 등록상태는 무조건 기본값으로는 ACTIVE로 설정
			        
		        )
		]]>
	</insert>
	
	<select id="selectOverlappedBuyerID" parameterType="String" resultType="String">
	   select decode(count(*),1, 'true', 0, 'false')
	   from foodmate_buyer
	   where byr_id = #{byr_id}
	</select>
</mapper>