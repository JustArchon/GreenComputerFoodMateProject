<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"../mybatis-3-mapper.dtd">

	<mapper namespace="mapper.member">
		<resultMap id="memResult" type="memberVO">
			<result property="id" column="id" />
		    <result property="password" column="password" />
		    <result property="name" column="name" />
		    <result property="birth_6" column="birth_6" />
		    <result property="sex" column="sex" />
		    <result property="email" column="email" />
		    <result property="phone_num" column="phone_num" />
		</resultMap>
		
		
	<select id="login" resultType="memberVO"  parameterType="java.util.Map"  >
	    <![CDATA[
			select * from foodmate_buyer 
			 where byr_id=#{id}
			 and pw=#{password}
		]]>
	</select>
		
	<insert id="insertNewBuyer" parameterType="memberVO">
		<![CDATA[
			insert into foodmate_buyer(
					byr_id, 
			        pw, 
			        name, 
			        birth_6, 
			        sex, 
			        email,
			        phone_num, 
			        join_date, 
			        status
		        )values(
			        #{id}, 
			        #{password}, 
			        #{name}, 
			        #{birth_6}, 
			        #{sex}, 
			        #{email}, 
			        #{phone_num}, 
			        DEFAULT,   -- join_date는 기본값 SYSDATE로 설정
			        'ACTIVE'  -- 등록상태는 무조건 기본값으로는 ACTIVE로 설정
			        
		        )
		]]>
	</insert>
	
	<select id="selectAllMemberList" resultMap="memResult">
		<![CDATA[
			select * from t_member order by joinDate desc
		]]>
	</select>
	
	<select id="selectMemberById" resultType="memberVO" parameterType="String">
		<![CDATA[
			select * from t_member where id = #{id}
		]]>
	</select>
	
	<select id="selectMemberByPwd" resultMap="memResult" parameterType="int">
		<![CDATA[
			select * from t_member where pwd = #{pwd}
		]]>
	</select>
	
	<select id="selectName" resultType="String">
		<![CDATA[
			select name from t_member where id = 'hong'
		]]>
	</select>
	
	<select id="selectPwd" resultType="int">
		<![CDATA[
			select pwd from t_member where id = 'hong'
		]]>
	</select>
	
	
	<update id="updateCustomer" parameterType="memberVO">
		<![CDATA[
			update t_member set pwd=#{pwd}, name=#{name}, email=#{email} where id=#{id}
		]]>
	</update>
	
	<delete id="deleteCustomer" parameterType="String">
	<![CDATA[
		delete from t_member where id=#{id}
	]]>
	</delete>
	
	<select id="loginById" resultType="memberVO" parameterType="memberVO">
	<![CDATA[
		select * from t_member where id = #{id} and pwd = #{pwd}
	]]>
	</select>
</mapper>